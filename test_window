#include "ft_cub.h"

void            my_mlx_pixel_put(t_window *win, int x, int y, int color, int scale)
{
    char    *dst;
    int     tmp = x;

    while (y < (y + scale))
    {
        x = tmp;
        while (x < (x + scale))
        {
            dst = win->addr + (y * win->line_length + x * (win->bits_per_pixel / 8));
            *(unsigned int*)dst = color;
            x++;
        }
        y++;
    }
}

void    defstruct(t_window *a)
{
    a->line_length = 16;
    a->bits_per_pixel = 256;
    a->endian = 0;
    a->mlx = NULL;
    a->win = NULL;
    a->img = NULL;
    a->addr = NULL;
}

int     ft_window(void)
{
  //  t_data    *img;
    //t_all   *all = NULL;
    int     x;
    int     y;
    t_window *win;
    t_window b;

    x = 0;
    y = 0;

    win = &b;
    defstruct(win);
    win->mlx = mlx_init();
    win->win = mlx_new_window(win->mlx, 540, 540, "Oasis");
    win->img = mlx_new_image(win->mlx, 200, 200);
    win->addr = mlx_get_data_addr(win->img, &win->bits_per_pixel, &win->line_length, &win->endian);
    //draw_screen(all);
    // while (y < 200)
    // {
    //     x = 0;
    //     while (x < 200)
    //     {
    //         my_mlx_pixel_put(win->win, x, y, 0xFFFFFF);
    //         x++;
    //     }
    //     y++;
    // }
    my_mlx_pixel_put(win, 100, 100, 0x00FF0000, 5);
    mlx_put_image_to_window(win->mlx, win->win, win->img, 0, 0);
	mlx_loop(win->mlx);
    return (0);
}
